{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useLeafletContext } from \"@react-leaflet/core\";\nimport * as L from \"leaflet\";\nimport { useState, useEffect } from \"react\";\nimport { useMap, useMapEvent, useMapEvents } from \"react-leaflet\";\nimport { Handler, latLng } from \"leaflet/dist/leaflet-src.esm\";\nimport Canvas from \"./Canvas\";\nimport { getPosition } from \"leaflet/src/dom/DomUtil\";\nimport { FullCanvas } from \"leaflet-fullcanvas\";\n/*\n Generic  Canvas Overlay for leaflet,\n Stanislav Sumbera, April , 2014\n\n - added userDrawFunc that is called when Canvas need to be redrawn\n - added few useful params fro userDrawFunc callback\n - fixed resize map bug\n inspired & portions taken from  :   https://github.com/Leaflet/Leaflet.heat\n\n License: MIT\n\n */\n\nL.CanvasOverlay = L.Class.extend({\n  initialize: function (userDrawFunc, options) {\n    this._userDrawFunc = userDrawFunc;\n    L.setOptions(this, options);\n  },\n  drawing: function (userDrawFunc) {\n    this._userDrawFunc = userDrawFunc;\n    return this;\n  },\n  params: function (options) {\n    L.setOptions(this, options);\n    return this;\n  },\n  canvas: function () {\n    return this._canvas;\n  },\n  redraw: function () {\n    if (!this._frame) {\n      this._frame = L.Util.requestAnimFrame(this._redraw, this);\n    }\n\n    return this;\n  },\n  onAdd: function (map) {\n    this._map = map;\n    this._canvas = L.DomUtil.create('canvas', 'leaflet-heatmap-layer');\n\n    var size = this._map.getSize();\n\n    this._canvas.width = size.x;\n    this._canvas.height = size.y;\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\n    L.DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n\n    map._panes.overlayPane.appendChild(this._canvas);\n\n    map.on('moveend', this._reset, this);\n    map.on('resize', this._resize, this);\n\n    if (map.options.zoomAnimation && L.Browser.any3d) {\n      map.on('zoomanim', this._animateZoom, this);\n    }\n\n    this._reset();\n  },\n  onRemove: function (map) {\n    map.getPanes().overlayPane.removeChild(this._canvas);\n    map.off('moveend', this._reset, this);\n    map.off('resize', this._resize, this);\n\n    if (map.options.zoomAnimation) {\n      map.off('zoomanim', this._animateZoom, this);\n    }\n\n    var this_canvas = null;\n  },\n  addTo: function (map) {\n    map.addLayer(this);\n    return this;\n  },\n  _resize: function (resizeEvent) {\n    this._canvas.width = resizeEvent.newSize.x;\n    this._canvas.height = resizeEvent.newSize.y;\n  },\n  _reset: function () {\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\n\n    L.DomUtil.setPosition(this._canvas, topLeft);\n\n    this._redraw();\n  },\n  _redraw: function () {\n    var size = this._map.getSize();\n\n    var bounds = this._map.getBounds();\n\n    var zoomScale = size.x * 180 / (20037508.34 * (bounds.getEast() - bounds.getWest())); // resolution = 1/zoomScale\n\n    var zoom = this._map.getZoom(); // console.time('process');\n\n\n    if (this._userDrawFunc) {\n      this._userDrawFunc(this, {\n        canvas: this._canvas,\n        bounds: bounds,\n        size: size,\n        zoomScale: zoomScale,\n        zoom: zoom,\n        options: this.options\n      });\n    } // console.timeEnd('process');\n\n\n    this._frame = null;\n  },\n  _animateZoom: function (e) {\n    var scale = this._map.getZoomScale(e.zoom),\n        offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\n\n    this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\n  }\n});\n\nL.canvasOverlay = function (userDrawFunc, options) {\n  return new L.CanvasOverlay(userDrawFunc, options);\n};\n\nL.Kitten = L.CanvasOverlay.extend({\n  //over riding the getsource function\n  drawSource: function (point) {\n    //get the context\n    var ctx = this.getCanvas().getContext(\"2d\");\n    ctx.globalCompositeOperation = \"lighter\"; //drawing the shape of the point\n\n    ctx.beginPath(); //adding gradient\n\n    var grd = ctx.createRadialGradient(point.x, point.y, 0, point.x, point.y, 10);\n    grd.addColorStop(0.200, 'rgba(255, 242, 0, 1)');\n    grd.addColorStop(0.370, 'rgba(255, 157, 0, 1)');\n    grd.addColorStop(0.5, 'rgba(255,255, 255, 1)');\n    ctx.fillStyle = grd;\n    ctx.arc(point.x, point.y, 2, 0, 2 * Math.PI, true);\n    ctx.fill();\n  }\n});\nL.GridLayer.Custom_Canvas = L.GridLayer.extend({\n  createTile: function (coords) {\n    var tile = document.createElement('canvas');\n    var tileSize = this.getTileSize();\n    tile.setAttribute('width', tileSize.x);\n    tile.setAttribute('height', tileSize.y);\n    var ctx = tile.getContext('2d'); // Draw whatever is needed in the canvas context\n    // For example, circles which get bigger as we zoom in\n\n    ctx.beginPath();\n    ctx.arc(tileSize.x / 2, tileSize.x / 2, 4 + coords.z * 4, 0, 2 * Math.PI, false);\n    ctx.fill();\n    return tile;\n  }\n});\nL.CustomLayer = L.Layer.extend({\n  initialize: function (options) {\n    this._latLng = options.latLng; // Continue initializing the layer plugin here.\n  },\n  onAdd: function (map) {\n    this._map = map; // create a DOM element and put it into one of the map panes\n\n    this._el = L.DomUtil.create('div', 'my-custom-layer leaflet-zoom-hide');\n    map.getPanes().overlayPane.appendChild(this._el); // add a viewreset event listener for updating layer's position, do the latter\n\n    map.on('viewreset', this._reset, this);\n\n    this._reset();\n  },\n  onRemove: function (map) {\n    // remove layer's DOM elements and listeners\n    map.getPanes().overlayPane.removeChild(this._el);\n    map.off('viewreset', this._reset, this);\n  },\n  _reset: function () {\n    // update layer's position\n    var pos = this._map.latLngToLayerPoint(this._latlng);\n\n    L.DomUtil.setPosition(this._el, pos);\n  }\n});\n\nconst Map_paint = () => {\n  _s();\n\n  const [isDrawing, setIsDrawing] = useState(false);\n  const ctx = useLeafletContext();\n  useEffect(() => {\n    const canvas_container = ctx.overlayContainer || ctx.map;\n    const new_grid_layer = new L.TileLayer.Kitten();\n    canvas_container.addLayer(new_grid_layer);\n    return () => {\n      canvas_container.removeLayer(new_grid_layer);\n    };\n  });\n};\n\n_s(Map_paint, \"DX7qMZmz1qqJ5KMtLnld7LKU3ms=\", false, function () {\n  return [useLeafletContext];\n});\n\n_c = Map_paint;\nexport default Map_paint;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map_paint\");","map":{"version":3,"names":["useLeafletContext","L","useState","useEffect","useMap","useMapEvent","useMapEvents","Handler","latLng","Canvas","getPosition","FullCanvas","CanvasOverlay","Class","extend","initialize","userDrawFunc","options","_userDrawFunc","setOptions","drawing","params","canvas","_canvas","redraw","_frame","Util","requestAnimFrame","_redraw","onAdd","map","_map","DomUtil","create","size","getSize","width","x","height","y","animated","zoomAnimation","Browser","any3d","addClass","_panes","overlayPane","appendChild","on","_reset","_resize","_animateZoom","onRemove","getPanes","removeChild","off","this_canvas","addTo","addLayer","resizeEvent","newSize","topLeft","containerPointToLayerPoint","setPosition","bounds","getBounds","zoomScale","getEast","getWest","zoom","getZoom","e","scale","getZoomScale","offset","_getCenterOffset","center","_multiplyBy","subtract","_getMapPanePos","style","TRANSFORM","getTranslateString","canvasOverlay","Kitten","drawSource","point","ctx","getCanvas","getContext","globalCompositeOperation","beginPath","grd","createRadialGradient","addColorStop","fillStyle","arc","Math","PI","fill","GridLayer","Custom_Canvas","createTile","coords","tile","document","createElement","tileSize","getTileSize","setAttribute","z","CustomLayer","Layer","_latLng","_el","pos","latLngToLayerPoint","_latlng","Map_paint","isDrawing","setIsDrawing","canvas_container","overlayContainer","new_grid_layer","TileLayer","removeLayer"],"sources":["/Users/romanradionov/PycharmProjects/reactleafletgeodjango/my-app/src/DrawingArea.js"],"sourcesContent":["import {useLeafletContext} from \"@react-leaflet/core\";\nimport * as L from \"leaflet\";\nimport {useState, useEffect} from \"react\";\nimport {useMap, useMapEvent, useMapEvents} from \"react-leaflet\";\nimport {Handler, latLng} from \"leaflet/dist/leaflet-src.esm\";\nimport Canvas from \"./Canvas\";\nimport {getPosition} from \"leaflet/src/dom/DomUtil\";\n\nimport {FullCanvas} from \"leaflet-fullcanvas\"\n\n\n/*\n Generic  Canvas Overlay for leaflet,\n Stanislav Sumbera, April , 2014\n\n - added userDrawFunc that is called when Canvas need to be redrawn\n - added few useful params fro userDrawFunc callback\n - fixed resize map bug\n inspired & portions taken from  :   https://github.com/Leaflet/Leaflet.heat\n\n License: MIT\n\n */\n\n\nL.CanvasOverlay = L.Class.extend({\n\n\tinitialize: function (userDrawFunc, options) {\n\t\tthis._userDrawFunc = userDrawFunc;\n\t\tL.setOptions(this, options);\n\t},\n\n\tdrawing: function (userDrawFunc) {\n\t\tthis._userDrawFunc = userDrawFunc;\n\t\treturn this;\n\t},\n\n\tparams:function(options){\n\t\tL.setOptions(this, options);\n\t\treturn this;\n\t},\n\n\tcanvas: function () {\n\t\treturn this._canvas;\n\t},\n\n\tredraw: function () {\n\t\tif (!this._frame) {\n\t\t\tthis._frame = L.Util.requestAnimFrame(this._redraw, this);\n\t\t}\n\t\treturn this;\n\t},\n\n\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\t\tthis._canvas = L.DomUtil.create('canvas', 'leaflet-heatmap-layer');\n\n\t\tvar size = this._map.getSize();\n\t\tthis._canvas.width = size.x;\n\t\tthis._canvas.height = size.y;\n\n\t\tvar animated = this._map.options.zoomAnimation && L.Browser.any3d;\n\t\tL.DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n\n\n\t\tmap._panes.overlayPane.appendChild(this._canvas);\n\n\t\tmap.on('moveend', this._reset, this);\n\t\tmap.on('resize',  this._resize, this);\n\n\t\tif (map.options.zoomAnimation && L.Browser.any3d) {\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\n\t\t}\n\n\t\tthis._reset();\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.getPanes().overlayPane.removeChild(this._canvas);\n\n\t\tmap.off('moveend', this._reset, this);\n\t\tmap.off('resize', this._resize, this);\n\n\t\tif (map.options.zoomAnimation) {\n\t\t\tmap.off('zoomanim', this._animateZoom, this);\n\t\t}\n\t\tvar this_canvas = null;\n\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\t_resize: function (resizeEvent) {\n\t\tthis._canvas.width  = resizeEvent.newSize.x;\n\t\tthis._canvas.height = resizeEvent.newSize.y;\n\t},\n\t_reset: function () {\n\t\tvar topLeft = this._map.containerPointToLayerPoint([0, 0]);\n\t\tL.DomUtil.setPosition(this._canvas, topLeft);\n\t\tthis._redraw();\n\t},\n\n\t_redraw: function () {\n\t\tvar size     = this._map.getSize();\n\t\tvar bounds   = this._map.getBounds();\n\t\tvar zoomScale = (size.x * 180) / (20037508.34  * (bounds.getEast() - bounds.getWest())); // resolution = 1/zoomScale\n\t\tvar zoom = this._map.getZoom();\n\n\t\t// console.time('process');\n\n\t\tif (this._userDrawFunc) {\n\t\t\tthis._userDrawFunc(this,\n\t\t\t\t{\n\t\t\t\t\tcanvas   :this._canvas,\n\t\t\t\t\tbounds   : bounds,\n\t\t\t\t\tsize     : size,\n\t\t\t\t\tzoomScale: zoomScale,\n\t\t\t\t\tzoom : zoom,\n\t\t\t\t\toptions: this.options\n\t\t\t\t});\n\t\t}\n\n\n\t\t// console.timeEnd('process');\n\n\t\tthis._frame = null;\n\t},\n\n\t_animateZoom: function (e) {\n\t\tvar scale = this._map.getZoomScale(e.zoom),\n\t\t\toffset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\n\n\t\tthis._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\n\n\t}\n});\n\nL.canvasOverlay = function (userDrawFunc, options) {\n\treturn new L.CanvasOverlay(userDrawFunc, options);\n};\n\n\n\n\nL.Kitten = L.CanvasOverlay.extend({\n\n\n//over riding the getsource function\n        drawSource: function(point) {\n            //get the context\n            var ctx = this.getCanvas().getContext(\"2d\");\n            ctx.globalCompositeOperation = \"lighter\";\n            //drawing the shape of the point\n            ctx.beginPath();\n            //adding gradient\n            var grd = ctx.createRadialGradient(point.x, point.y, 0, point.x, point.y, 10);\n            grd.addColorStop(0.200, 'rgba(255, 242, 0, 1)');\n            grd.addColorStop(0.370, 'rgba(255, 157, 0, 1)');\n            grd.addColorStop(0.5, 'rgba(255,255, 255, 1)');\n            ctx.fillStyle = grd;\n            ctx.arc(point.x, point.y , 2, 0, 2 * Math.PI, true);\n            ctx.fill();\n}\n\n\n});\n\n\n\n\nL.GridLayer.Custom_Canvas = L.GridLayer.extend({\n    createTile: function (coords){\n        var tile = document.createElement('canvas');\n\n        var tileSize = this.getTileSize();\n        tile.setAttribute('width', tileSize.x);\n        tile.setAttribute('height', tileSize.y);\n\n        var ctx = tile.getContext('2d');\n\n        // Draw whatever is needed in the canvas context\n        // For example, circles which get bigger as we zoom in\n        ctx.beginPath();\n        ctx.arc(tileSize.x/2, tileSize.x/2, 4 + coords.z*4, 0, 2*Math.PI, false);\n        ctx.fill();\n\n        return tile;\n    }\n})\n\n\nL.CustomLayer = L.Layer.extend({\n\n\tinitialize: function(options) {\n  this._latLng = options.latLng;\n  // Continue initializing the layer plugin here.\n},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\t// create a DOM element and put it into one of the map panes\n\t\tthis._el = L.DomUtil.create('div', 'my-custom-layer leaflet-zoom-hide');\n\t\tmap.getPanes().overlayPane.appendChild(this._el);\n\n\t\t// add a viewreset event listener for updating layer's position, do the latter\n\t\tmap.on('viewreset', this._reset, this);\n\t\tthis._reset();\n\t},\n\n\tonRemove: function (map) {\n\t\t// remove layer's DOM elements and listeners\n\t\tmap.getPanes().overlayPane.removeChild(this._el);\n\t\tmap.off('viewreset', this._reset, this);\n\t},\n\n\t_reset: function () {\n\t\t// update layer's position\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng);\n\t\tL.DomUtil.setPosition(this._el, pos);\n\t}\n});\n\n\n\n\nconst Map_paint = () => {\n    const [isDrawing, setIsDrawing] = useState(false)\n\n    const ctx = useLeafletContext()\n\n\n\n\n\n\n\n\n\n\n\n\n\n    useEffect(() => {\n\n\n\n\n\n\n\n\n    const canvas_container = ctx.overlayContainer || ctx.map\n    const new_grid_layer = new L.TileLayer.Kitten\n\n\n\n\n\n        canvas_container.addLayer(new_grid_layer)\n\n\n\n\n\n        return () => {\n            canvas_container.removeLayer(new_grid_layer)\n\n\n        }\n\n        })\n}\n\nexport default Map_paint"],"mappings":"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"},"metadata":{},"sourceType":"module"}