{"ast":null,"code":"var _s2 = $RefreshSig$();\n\nimport { useLeafletContext } from \"@react-leaflet/core\";\nimport * as L from \"leaflet\";\nimport { useState, useEffect } from \"react\";\n\nfunction CustomLayer(props) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const {\n    options\n  } = props;\n  const context = useLeafletContext();\n  let points = [];\n  L.CustomLayer = L.Layer.extend({\n    // -- initialized is called on prototype\n    initialize: function (options) {\n      this._map = null;\n      this._canvas = null;\n      this._frame = null;\n      this._delegate = null;\n      L.setOptions(this, options);\n    },\n    delegate: function (del) {\n      this._delegate = del;\n      return this;\n    },\n    needRedraw: function () {\n      if (!this._frame) {\n        this._frame = L.Util.requestAnimFrame(this.drawLayer, this);\n      }\n\n      return this;\n    },\n    //-------------------------------------------------------------\n    _onLayerDidResize: function (resizeEvent) {\n      this._canvas.width = resizeEvent.newSize.x;\n      this._canvas.height = resizeEvent.newSize.y;\n    },\n    //-------------------------------------------------------------\n    _onLayerDidMove: function () {\n      if (!this._canvasAdded) {\n        return;\n      }\n\n      var topLeft = this._map.containerPointToLayerPoint([0, 0]);\n\n      L.DomUtil.setPosition(this._canvas, topLeft);\n      this.drawLayer();\n    },\n    //-------------------------------------------------------------\n    getEvents: function () {\n      var events = {\n        resize: this._onLayerDidResize,\n        moveend: this._onLayerDidMove,\n        move: this._onLayerDidMove\n      };\n\n      if (this._map.options.zoomAnimation && L.Browser.any3d) {\n        events.zoomanim = this._animateZoom;\n      }\n\n      return events;\n    },\n    //-------------------------------------------------------------\n    onAdd: function (map) {\n      this._map = map;\n      this._canvas = L.DomUtil.create('canvas', 'leaflet-layer');\n      this.tiles = {};\n\n      var size = this._map.getSize();\n\n      this._canvas.width = size.x;\n      this._canvas.height = size.y;\n      var animated = this._map.options.zoomAnimation && L.Browser.any3d;\n      L.DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n      let pane = this.options.pane ? map.getPanes()[this.options.pane] : map._panes.overlayPane;\n      pane.appendChild(this._canvas);\n      map.on(this.getEvents(), this);\n      this._canvasAdded = true;\n      var del = this._delegate || this;\n      del.onLayerDidMount && del.onLayerDidMount(); // -- callback\n\n      const ctx = this._canvas.getContext(\"2d\");\n\n      const rect = this._canvas.getBoundingClientRect();\n\n      let painting = false;\n\n      function startPosition() {\n        painting = true;\n      }\n\n      ;\n\n      function finishedPosition() {\n        painting = false;\n        ctx.beginPath();\n      }\n\n      ;\n\n      function draw(e) {\n        if (!painting) return;\n        ctx.lineWidth = 1;\n        ctx.lineCap = \"round\";\n        const latlng = map.layerPointToLatLng([e.clientX - rect.left, e.clientY - rect.top]);\n        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);\n        ctx.stroke();\n        ctx.beginPath();\n        ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);\n        map.scrollWheelZoom.disable();\n        map.dragging.disable();\n        map.touchZoom.disable();\n        map.doubleClickZoom.disable();\n        map.boxZoom.disable();\n        map.keyboard.disable();\n        points.push([latlng.lng, latlng.lat]);\n      }\n\n      ;\n\n      this._canvas.addEventListener('mousedown', startPosition);\n\n      this._canvas.addEventListener('mouseup', finishedPosition);\n\n      this._canvas.addEventListener('mousemove', draw);\n\n      this._canvas.style.position = \"absolute\";\n      this._canvas.style.cursor = \"crosshair\";\n\n      this._canvas.addEventListener('mouseup', function (e) {\n        // Create a GeoJSON layer and add it to the map\n        const geojson = {\n          \"type\": \"FeatureCollection\",\n          \"features\": [{\n            \"type\": \"Feature\",\n            \"geometry\": {\n              \"type\": \"LineString\",\n              \"coordinates\": points\n            }\n          }]\n        };\n        L.geoJSON(geojson).addTo(map); // Clear the points array\n\n        points = [];\n      });\n\n      this.needRedraw();\n    },\n    //-------------------------------------------------------------\n    onRemove: function (map) {\n      var del = this._delegate || this;\n      del.onLayerWillUnmount && del.onLayerWillUnmount(); // -- callback\n\n      let pane = this.options.pane ? map.getPanes()[this.options.pane] : map._panes.overlayPane;\n      pane.removeChild(this._canvas);\n      map.off(this.getEvents(), this);\n      this._canvas = null; // Clear the points array\n\n      points = [];\n      map.scrollWheelZoom.enable();\n      map.dragging.enable();\n      map.touchZoom.enable();\n      map.doubleClickZoom.enable();\n      map.boxZoom.enable();\n      map.keyboard.enable();\n    },\n    //------------------------------------------------------------\n    addTo: function (map) {\n      map.addLayer(this);\n      return this;\n    },\n    // --------------------------------------------------------------------------------\n    LatLonToMercator: function (latlon) {\n      return {\n        x: latlon.lng * 6378137 * Math.PI / 180,\n        y: Math.log(Math.tan((90 + latlon.lat) * Math.PI / 360)) * 6378137\n      };\n    },\n    //------------------------------------------------------------------------------\n    drawLayer: function () {\n      // -- todo make the viewInfo properties  flat objects.\n      var size = this._map.getSize();\n\n      var bounds = this._map.getBounds();\n\n      var zoom = this._map.getZoom();\n\n      var center = this.LatLonToMercator(this._map.getCenter());\n      var corner = this.LatLonToMercator(this._map.containerPointToLatLng(this._map.getSize()));\n      var del = this._delegate || this;\n      del.onDrawLayer && del.onDrawLayer({\n        layer: this,\n        canvas: this._canvas,\n        bounds: bounds,\n        size: size,\n        zoom: zoom,\n        center: center,\n        corner: corner\n      });\n      this._frame = null;\n    },\n    //x------------------------------------------------------------------------------\n    _animateZoom: function (e) {\n      var scale = this._map.getZoomScale(e.zoom);\n\n      var offset = this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(), e.zoom, e.center);\n\n      L.DomUtil.setTransform(this._canvas, offset, scale);\n    }\n  });\n\n  const Map_paint = () => {\n    _s();\n\n    const [isDrawing, setIsDrawing] = useState(false);\n    const ctx = useLeafletContext();\n    useEffect(() => {\n      const canvas_container = ctx.overlayContainer || ctx.map;\n      const new_grid_layer = new L.CustomLayer();\n      canvas_container.addLayer(new_grid_layer);\n      console.log(new_grid_layer._canvas.ctx);\n      console.log(\"points are:\", points);\n      return () => {\n        canvas_container.removeLayer(new_grid_layer);\n      };\n    });\n  };\n\n  _s(Map_paint, \"DX7qMZmz1qqJ5KMtLnld7LKU3ms=\", false, function () {\n    return [useLeafletContext];\n  });\n}\n\n_s2(CustomLayer, \"ops7TQxj18DMjl8fGknamoP87m0=\", false, function () {\n  return [useLeafletContext];\n});\n\n_c = CustomLayer;\nexport default Map_paint;\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomLayer\");","map":{"version":3,"names":["useLeafletContext","L","useState","useEffect","CustomLayer","props","options","context","points","Layer","extend","initialize","_map","_canvas","_frame","_delegate","setOptions","delegate","del","needRedraw","Util","requestAnimFrame","drawLayer","_onLayerDidResize","resizeEvent","width","newSize","x","height","y","_onLayerDidMove","_canvasAdded","topLeft","containerPointToLayerPoint","DomUtil","setPosition","getEvents","events","resize","moveend","move","zoomAnimation","Browser","any3d","zoomanim","_animateZoom","onAdd","map","create","tiles","size","getSize","animated","addClass","pane","getPanes","_panes","overlayPane","appendChild","on","onLayerDidMount","ctx","getContext","rect","getBoundingClientRect","painting","startPosition","finishedPosition","beginPath","draw","e","lineWidth","lineCap","latlng","layerPointToLatLng","clientX","left","clientY","top","lineTo","stroke","moveTo","scrollWheelZoom","disable","dragging","touchZoom","doubleClickZoom","boxZoom","keyboard","push","lng","lat","addEventListener","style","position","cursor","geojson","geoJSON","addTo","onRemove","onLayerWillUnmount","removeChild","off","enable","addLayer","LatLonToMercator","latlon","Math","PI","log","tan","bounds","getBounds","zoom","getZoom","center","getCenter","corner","containerPointToLatLng","onDrawLayer","layer","canvas","scale","getZoomScale","offset","_latLngToNewLayerPoint","getNorthWest","setTransform","Map_paint","isDrawing","setIsDrawing","canvas_container","overlayContainer","new_grid_layer","console","removeLayer"],"sources":["/Users/romanradionov/PycharmProjects/reactleafletgeodjango/my-app/src/DrawingArea.js"],"sourcesContent":["import {useLeafletContext} from \"@react-leaflet/core\";\nimport * as L from \"leaflet\";\nimport {useState, useEffect} from \"react\";\n\n\n\n\n\n\n\nfunction CustomLayer(props) {\n    const {options} = props;\n    const context = useLeafletContext();\n    let points = [];\n\n\n    L.CustomLayer = L.Layer.extend({\n\n\n        // -- initialized is called on prototype\n        initialize: function (options) {\n            this._map = null;\n            this._canvas = null;\n            this._frame = null;\n            this._delegate = null;\n            L.setOptions(this, options);\n        },\n\n        delegate: function (del) {\n            this._delegate = del;\n            return this;\n        },\n\n        needRedraw: function () {\n            if (!this._frame) {\n                this._frame = L.Util.requestAnimFrame(this.drawLayer, this);\n            }\n            return this;\n        },\n\n        //-------------------------------------------------------------\n        _onLayerDidResize: function (resizeEvent) {\n            this._canvas.width = resizeEvent.newSize.x;\n            this._canvas.height = resizeEvent.newSize.y;\n        },\n\n        //-------------------------------------------------------------\n        _onLayerDidMove: function () {\n            if (!this._canvasAdded) {\n                return;\n            }\n\n            var topLeft = this._map.containerPointToLayerPoint([0, 0]);\n            L.DomUtil.setPosition(this._canvas, topLeft);\n            this.drawLayer();\n        },\n\n        //-------------------------------------------------------------\n        getEvents: function () {\n            var events = {\n                resize: this._onLayerDidResize,\n                moveend: this._onLayerDidMove,\n                move: this._onLayerDidMove\n            };\n            if (this._map.options.zoomAnimation && L.Browser.any3d) {\n                events.zoomanim = this._animateZoom;\n            }\n\n            return events;\n        },\n        //-------------------------------------------------------------\n        onAdd: function (map) {\n\n\n            this._map = map;\n            this._canvas = L.DomUtil.create('canvas', 'leaflet-layer');\n            this.tiles = {};\n\n            var size = this._map.getSize();\n            this._canvas.width = size.x;\n            this._canvas.height = size.y;\n\n            var animated = this._map.options.zoomAnimation && L.Browser.any3d;\n            L.DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n\n            let pane = this.options.pane ? map.getPanes()[this.options.pane] : map._panes.overlayPane;\n            pane.appendChild(this._canvas);\n\n            map.on(this.getEvents(), this);\n\n            this._canvasAdded = true;\n\n            var del = this._delegate || this;\n            del.onLayerDidMount && del.onLayerDidMount(); // -- callback\n\n\n            const ctx = this._canvas.getContext(\"2d\");\n            const rect = this._canvas.getBoundingClientRect()\n\n\n            let painting = false;\n\n            function startPosition() {\n                painting = true\n\n\n            };\n\n            function finishedPosition() {\n                painting = false;\n                ctx.beginPath();\n\n            };\n\n\n            function draw(e) {\n                if (!painting) return;\n                ctx.lineWidth = 1;\n                ctx.lineCap = \"round\";\n                const latlng = map.layerPointToLatLng([e.clientX - rect.left, e.clientY - rect.top]);\n                ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);\n                ctx.stroke();\n                ctx.beginPath();\n                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);\n                map.scrollWheelZoom.disable()\n                map.dragging.disable()\n                map.touchZoom.disable()\n                map.doubleClickZoom.disable()\n                map.boxZoom.disable()\n                map.keyboard.disable()\n                points.push([latlng.lng, latlng.lat]);\n\n            };\n\n            this._canvas.addEventListener('mousedown', startPosition);\n            this._canvas.addEventListener('mouseup', finishedPosition);\n            this._canvas.addEventListener('mousemove', draw);\n            this._canvas.style.position = \"absolute\";\n            this._canvas.style.cursor = \"crosshair\"\n            this._canvas.addEventListener('mouseup', function (e) {\n\n\n                // Create a GeoJSON layer and add it to the map\n                const geojson = {\n                    \"type\": \"FeatureCollection\",\n                    \"features\": [{\n                        \"type\": \"Feature\",\n                        \"geometry\": {\n                            \"type\": \"LineString\",\n                            \"coordinates\": points\n\n                        }\n                    }]\n                };\n                L.geoJSON(geojson).addTo(map);\n\n                // Clear the points array\n                points = [];\n            });\n\n\n            this.needRedraw();\n\n\n        },\n\n        //-------------------------------------------------------------\n        onRemove: function (map) {\n            var del = this._delegate || this;\n            del.onLayerWillUnmount && del.onLayerWillUnmount(); // -- callback\n\n\n            let pane = this.options.pane ? map.getPanes()[this.options.pane] : map._panes.overlayPane;\n            pane.removeChild(this._canvas);\n\n            map.off(this.getEvents(), this);\n\n            this._canvas = null;\n\n\n            // Clear the points array\n            points = [];\n\n            map.scrollWheelZoom.enable();\n            map.dragging.enable();\n            map.touchZoom.enable();\n            map.doubleClickZoom.enable();\n            map.boxZoom.enable();\n            map.keyboard.enable();\n\n\n        },\n\n        //------------------------------------------------------------\n        addTo: function (map) {\n            map.addLayer(this);\n            return this;\n        },\n\n        // --------------------------------------------------------------------------------\n        LatLonToMercator: function (latlon) {\n            return {\n                x: latlon.lng * 6378137 * Math.PI / 180,\n                y: Math.log(Math.tan((90 + latlon.lat) * Math.PI / 360)) * 6378137\n            };\n        },\n\n        //------------------------------------------------------------------------------\n        drawLayer: function () {\n            // -- todo make the viewInfo properties  flat objects.\n            var size = this._map.getSize();\n            var bounds = this._map.getBounds();\n            var zoom = this._map.getZoom();\n\n            var center = this.LatLonToMercator(this._map.getCenter());\n            var corner = this.LatLonToMercator(this._map.containerPointToLatLng(this._map.getSize()));\n\n            var del = this._delegate || this;\n            del.onDrawLayer && del.onDrawLayer({\n                layer: this,\n                canvas: this._canvas,\n                bounds: bounds,\n                size: size,\n                zoom: zoom,\n                center: center,\n                corner: corner\n            });\n            this._frame = null;\n        },\n\n\n        //x------------------------------------------------------------------------------\n        _animateZoom: function (e) {\n            var scale = this._map.getZoomScale(e.zoom);\n            var offset = this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(), e.zoom, e.center);\n\n            L.DomUtil.setTransform(this._canvas, offset, scale);\n        },\n\n\n    });\n\n\n    const Map_paint = () => {\n        const [isDrawing, setIsDrawing] = useState(false)\n\n\n        const ctx = useLeafletContext()\n\n\n        useEffect(() => {\n\n            const canvas_container = ctx.overlayContainer || ctx.map\n            const new_grid_layer = new L.CustomLayer\n\n\n            canvas_container.addLayer(new_grid_layer)\n\n\n            console.log(new_grid_layer._canvas.ctx)\n            console.log(\"points are:\", points)\n\n\n            return () => {\n                canvas_container.removeLayer(new_grid_layer)\n\n\n            }\n\n\n        })\n\n\n    }\n\n}\nexport default Map_paint"],"mappings":"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"},"metadata":{},"sourceType":"module"}