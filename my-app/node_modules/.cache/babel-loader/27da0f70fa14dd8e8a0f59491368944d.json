{"ast":null,"code":"/*!\n * Leaflet.CustomLayer.js v2.1.0\n * \n * Copyright (c) 2019-present Derek Li\n * Released under the MIT License - https://choosealicense.com/licenses/mit/\n * \n * https://github.com/iDerekLi/Leaflet.CustomLayer\n */\nimport t from \"leaflet\";\n/**\n * @class CustomLayer\n * @inherits Layer\n *\n * Leaflet overlay plugin: L.CustomLayer - fully custom Layer.\n */\n\nvar i = t.Layer.extend({\n  // CustomLayer options\n  options: {\n    // How much to extend the clip area around the map view (relative to its size)\n    // e.g. 0.1 would be 10% of map view in each direction\n    padding: 0,\n    // How much to extend click tolerance round a path/object on the map\n    tolerance: 0,\n    // The DomElement object to display\n    container: null,\n    // The opacity of the layer, [0,1]\n    opacity: 1,\n    // Is the layer visible\n    visible: !0,\n    // The zIndex of the layer\n    zIndex: undefined,\n    // Set the visibility min zoom level\n    minZoom: 0,\n    // Set the visibility max zoom level\n    maxZoom: 18\n  },\n  initialize: function initialize(i) {\n    t.setOptions(this, i),\n    /* Built-in Date */\n    t.stamp(this), this._map = undefined, this._container = undefined, this._bounds = undefined, this._center = undefined, this._zoom = undefined, this._padding = undefined;\n  },\n\n  /* Built-in Lifecycle */\n  beforeAdd: function beforeAdd() {\n    this._zoomVisible = !0;\n  },\n  getEvents: function getEvents() {\n    // Layer trigger priority\n    // move: movestart -> move -> moveend\n    // zoom: zoomstart -> movestart -> zoomanim -> zoom -> move -> zoomend -> moveend\n    // resize: move -> resize -> moveend\n    var t = {\n      viewreset: this._onLayerViewReset,\n      zoom: this._onLayerZoom,\n      moveend: this._onLayerMoveEnd,\n      zoomend: this._onLayerZoomEnd\n    };\n    return this._zoomAnimated && (t.zoomanim = this._onLayerAnimZoom), t;\n  },\n  onAdd: function onAdd() {\n    if (this.fire(\"layer-beforemount\"), // Lifecycle beforeMount\n    this._container || this._initContainer(), this.setOpacity(this.options.opacity), window.isNaN(this.options.zIndex)) switch (this._container.tagName) {\n      // http://www.w3.org/1999/xhtml\n      case \"CANVAS\":\n        this.setZIndex(100);\n        break;\n      // http://www.w3.org/2000/svg\n\n      case \"svg\":\n        this.setZIndex(200);\n        break;\n\n      default:\n        this.setZIndex(100);\n    } else this.setZIndex(this.options.zIndex);\n    this.getPane().appendChild(this._container), this._onZoomVisible(), this.fire(\"layer-mounted\"), // Lifecycle mounted\n    this._update();\n  },\n  onRemove: function onRemove() {\n    this.fire(\"layer-beforedestroy\"), // Lifecycle beforeDestroy\n    this._destroyContainer(), this.fire(\"layer-destroyed\");\n  },\n\n  /* Built-in Events */\n  _onLayerViewReset: function _onLayerViewReset() {\n    this._reset();\n  },\n  _onLayerAnimZoom: function _onLayerAnimZoom(t) {\n    this._updateTransform(t.center, t.zoom);\n  },\n  _onLayerZoom: function _onLayerZoom() {\n    this._updateTransform(this._map.getCenter(), this._map.getZoom());\n  },\n  _onLayerZoomEnd: function _onLayerZoomEnd() {},\n  _onLayerMoveEnd: function _onLayerMoveEnd() {\n    this._isZoomVisible() ? this._update() : this._zoomHide();\n  },\n  _onZoomVisible: function _onZoomVisible() {\n    this._isZoomVisible() ? this._zoomShow() : this._zoomHide();\n  },\n\n  /* Built-in Methods */\n  _initContainer: function _initContainer() {\n    var i = this._container = this.options.container;\n    t.DomUtil.addClass(i, \"leaflet-layer\"), this._zoomAnimated && t.DomUtil.addClass(this._container, \"leaflet-zoom-animated\");\n  },\n  _destroyContainer: function _destroyContainer() {\n    t.DomUtil.remove(this._container), delete this._container;\n  },\n  _isZoomVisible: function _isZoomVisible() {\n    var t = this.options.minZoom,\n        i = this.options.maxZoom,\n        e = this._map.getZoom();\n\n    return e >= t && e <= i;\n  },\n  _zoomShow: function _zoomShow() {\n    this._zoomVisible || (this._zoomVisible = !0, this._map.off({\n      zoomend: this._onZoomVisible\n    }, this), this.options.visible && (this._map.on(this.getEvents(), this), this.getContainer().style.display = \"\"));\n  },\n  _zoomHide: function _zoomHide() {\n    this._zoomVisible && (this._zoomVisible = !1, this._map.off(this.getEvents(), this), this._map.on({\n      zoomend: this._onZoomVisible\n    }, this), this.getContainer().style.display = \"none\");\n  },\n  _updateTransform: function _updateTransform(i, e) {\n    var o = this._map.getZoomScale(e, this._zoom),\n        n = t.DomUtil.getPosition(this._container),\n        s = this._map.getSize().multiplyBy(.5 + this.options.padding),\n        a = this._map.project(this._center, e),\n        r = this._map.project(i, e).subtract(a),\n        h = s.multiplyBy(-o).add(n).add(s).subtract(r);\n\n    t.Browser.any3d ? t.DomUtil.setTransform(this._container, h, o) : t.DomUtil.setPosition(this._container, h);\n  },\n  _update: function _update() {\n    if (!this._map._animatingZoom || !this._bounds) {\n      this.__update();\n\n      var i = this._bounds,\n          e = this._container;\n      t.DomUtil.setPosition(e, i.min), this.fire(\"layer-render\");\n    }\n  },\n  __update: function __update() {\n    // Update pixel bounds of renderer container (for positioning/sizing/clipping later)\n    // Subclasses are responsible of firing the 'update' event.\n    var i = this.options.padding,\n        e = this._map.getSize(),\n        o = this._map.containerPointToLayerPoint(e.multiplyBy(-i));\n\n    this._padding = e.multiplyBy(i), // this._bounds = new L.Bounds(\n    //   min.round(),\n    //   min.add(size.multiplyBy(1 + p * 2)).round()\n    // );\n    this._bounds = new t.Bounds(o, o.add(e.multiplyBy(1 + 2 * i))), this._center = this._map.getCenter(), this._zoom = this._map.getZoom();\n  },\n  _reset: function _reset() {\n    this._update(), this._updateTransform(this._center, this._zoom);\n  },\n\n  /**\n  * API\n  */\n\n  /* Methods */\n  getContainer: function getContainer() {\n    return this._container;\n  },\n  setContainer: function setContainer(t) {\n    var i = this.getContainer(),\n        e = i.parentNode;\n    if (delete this._container, this.options.container = t, this._container || this._initContainer(), this.setOpacity(this.options.opacity), window.isNaN(this.options.zIndex)) switch (this._container.tagName) {\n      case \"CANVAS\":\n        this.setZIndex(100);\n        break;\n\n      case \"svg\":\n        this.setZIndex(200);\n        break;\n\n      default:\n        this.setZIndex(100);\n    } else this.setZIndex(this.options.zIndex);\n    return e ? e.replaceChild(t, i) : this.getPane().appendChild(t), this._update(), this;\n  },\n  getOpacity: function getOpacity() {\n    return this.options.opacity;\n  },\n  setOpacity: function setOpacity(t) {\n    return this.getContainer().style.opacity = this.options.opacity = 1 * t, this;\n  },\n  getZIndex: function getZIndex() {\n    return this.options.zIndex;\n  },\n  setZIndex: function setZIndex(t) {\n    return this.getContainer().style.zIndex = this.options.zIndex = 1 * t, this;\n  },\n  show: function show() {\n    if (!this.options.visible) {\n      if (this.options.visible = !0, this._isZoomVisible()) return this._map.on(this.getEvents(), this), this.getContainer().style.display = \"\", this._update(), this;\n\n      this._zoomHide();\n    }\n  },\n  hide: function hide() {\n    if (this.options.visible) return this.options.visible = !1, this._zoomHide(), this._map.off(this.getEvents(), this), this.getContainer().style.display = \"none\", this;\n  },\n  setFullLayerBounds: function setFullLayerBounds() {\n    var i = this.getContainer(),\n        e = this._bounds.getSize(),\n        o = this._padding;\n\n    switch (i.tagName) {\n      case \"CANVAS\":\n        var n = t.Browser.retina ? 2 : 1;\n        i.width = n * e.x, i.height = n * e.y, i.style.width = e.x + \"px\", i.style.height = e.y + \"px\";\n        var s = i.getContext(\"2d\");\n        return t.Browser.retina && s.scale(n, n), s.translate(o.x, o.y), {\n          container: i,\n          ctx: s,\n          dpr: n\n        };\n\n      case \"svg\":\n        return i.setAttribute(\"width\", e.x), i.setAttribute(\"height\", e.y), i.style.width = e.x + \"px\", i.style.height = e.y + \"px\", i.setAttribute(\"viewBox\", \"\".concat(-o.x, \" \").concat(-o.y, \" \").concat(e.x, \" \").concat(e.y)), {\n          container: i\n        };\n\n      case \"DIV\":\n        return i.style.boxSizing = \"content-box\", i.style.width = e.x - o.x + \"px\", i.style.height = e.y - o.y + \"px\", i.style.padding = \"\".concat(o.y, \"px \").concat(o.x, \"px\"), {\n          container: i\n        };\n\n      default:\n        return i.setAttribute(\"width\", e.x), i.setAttribute(\"height\", e.y), i.style.width = e.x + \"px\", i.style.height = e.y + \"px\", {\n          container: i\n        };\n    }\n  }\n  /* Events */\n  // on(\"layer-beforemount\", fn);\n  // on(\"layer-mounted\", fn);\n  // on(\"layer-render\", fn);\n  // on(\"layer-beforedestroy\", fn);\n  // on(\"layer-destroyed\", fn);\n\n}); // @factory L.customLayer(options?: Renderer options)\n// Creates a CustomLayer renderer with the given options.\n\nfunction customLayer(e) {\n  return t.customLayer ? new i(e) : null;\n}\n/**\n * Plugin Props\n */\n\n\nt.CustomLayer = i, t.customLayer = customLayer;\nexport default customLayer;\nexport { i as CustomLayer, customLayer };","map":{"version":3,"mappings":"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","names":["CustomLayer","L","Layer","extend","options","padding","tolerance","container","opacity","visible","zIndex","undefined","minZoom","maxZoom","initialize","setOptions","this","stamp","_map","_container","_bounds","_center","_zoom","_padding","beforeAdd","_zoomVisible","getEvents","events","viewreset","_onLayerViewReset","zoom","_onLayerZoom","moveend","_onLayerMoveEnd","zoomend","_onLayerZoomEnd","_zoomAnimated","zoomanim","_onLayerAnimZoom","onAdd","fire","_initContainer","setOpacity","window","isNaN","tagName","setZIndex","getPane","appendChild","_onZoomVisible","_update","onRemove","_destroyContainer","_reset","ev","_updateTransform","center","getCenter","getZoom","_isZoomVisible","_zoomHide","_zoomShow","DomUtil","addClass","remove","off","on","getContainer","style","display","scale","getZoomScale","position","getPosition","viewHalf","getSize","multiplyBy","currentCenterPoint","project","centerOffset","subtract","topLeftOffset","add","Browser","any3d","setTransform","setPosition","_animatingZoom","__update","b","min","p","size","containerPointToLayerPoint","Bounds","setContainer","newContainer","old","parent","parentNode","replaceChild","getOpacity","getZIndex","show","hide","setFullLayerBounds","dpr","retina","width","x","height","y","ctx","getContext","translate","setAttribute","boxSizing","customLayer"],"sources":["/Users/romanradionov/PycharmProjects/reactleafletgeodjango/my-app/node_modules/leaflet-customlayer/src/Leaflet.CustomLayer.js"],"sourcesContent":["import L from \"leaflet\";\n\n/**\n * @class CustomLayer\n * @inherits Layer\n *\n * Leaflet overlay plugin: L.CustomLayer - fully custom Layer.\n */\nconst CustomLayer = L.Layer.extend({\n  // CustomLayer options\n  options: {\n    // How much to extend the clip area around the map view (relative to its size)\n    // e.g. 0.1 would be 10% of map view in each direction\n    padding: 0,\n\n    // How much to extend click tolerance round a path/object on the map\n    tolerance: 0,\n\n    // The DomElement object to display\n    container: null,\n\n    // The opacity of the layer, [0,1]\n    opacity: 1,\n\n    // Is the layer visible\n    visible: true,\n\n    // The zIndex of the layer\n    zIndex: undefined,\n\n    // Set the visibility min zoom level\n    minZoom: 0,\n\n    // Set the visibility max zoom level\n    maxZoom: 18\n\n    // Whether to redraw during zoom panning, complex drawing suggestions are set to false (next version)\n    // alwaysRender: true\n  },\n\n  initialize(options) {\n    L.setOptions(this, options);\n\n    /* Built-in Date */\n    L.stamp(this);\n    this._map = undefined;\n    this._container = undefined;\n    this._bounds = undefined;\n    this._center = undefined;\n    this._zoom = undefined;\n    this._padding = undefined;\n  },\n\n  /* Built-in Lifecycle */\n\n  beforeAdd() {\n    this._zoomVisible = true;\n  },\n\n  getEvents() {\n    // Layer trigger priority\n    // move: movestart -> move -> moveend\n    // zoom: zoomstart -> movestart -> zoomanim -> zoom -> move -> zoomend -> moveend\n    // resize: move -> resize -> moveend\n    let events = {\n      viewreset: this._onLayerViewReset,\n      zoom: this._onLayerZoom,\n      moveend: this._onLayerMoveEnd,\n      zoomend: this._onLayerZoomEnd\n    };\n    if (this._zoomAnimated) {\n      events.zoomanim = this._onLayerAnimZoom;\n    }\n    return events;\n  },\n\n  onAdd() {\n    this.fire(\"layer-beforemount\"); // Lifecycle beforeMount\n\n    if (!this._container) {\n      this._initContainer(); // defined by renderer implementations\n    }\n\n    this.setOpacity(this.options.opacity);\n\n    if (window.isNaN(this.options.zIndex)) {\n      switch (this._container.tagName) {\n        // http://www.w3.org/1999/xhtml\n        case \"CANVAS\": {\n          this.setZIndex(100);\n          break;\n        }\n        // http://www.w3.org/2000/svg\n        case \"svg\": {\n          this.setZIndex(200);\n          break;\n        }\n        default: {\n          this.setZIndex(100);\n        }\n      }\n    } else {\n      this.setZIndex(this.options.zIndex);\n    }\n\n    this.getPane().appendChild(this._container);\n\n    this._onZoomVisible();\n\n    this.fire(\"layer-mounted\"); // Lifecycle mounted\n\n    this._update();\n  },\n\n  onRemove() {\n    this.fire(\"layer-beforedestroy\"); // Lifecycle beforeDestroy\n\n    this._destroyContainer();\n\n    this.fire(\"layer-destroyed\"); // Lifecycle destroyed\n  },\n\n  /* Built-in Events */\n\n  _onLayerViewReset() {\n    this._reset();\n  },\n\n  _onLayerAnimZoom(ev) {\n    this._updateTransform(ev.center, ev.zoom);\n  },\n\n  _onLayerZoom() {\n    this._updateTransform(this._map.getCenter(), this._map.getZoom());\n  },\n\n  _onLayerZoomEnd() {},\n\n  _onLayerMoveEnd() {\n    if (!this._isZoomVisible()) {\n      this._zoomHide();\n      return;\n    }\n\n    this._update();\n  },\n\n  _onZoomVisible() {\n    if (this._isZoomVisible()) {\n      this._zoomShow();\n    } else {\n      this._zoomHide();\n    }\n  },\n\n  /* Built-in Methods */\n\n  _initContainer() {\n    const container = (this._container = this.options.container);\n\n    L.DomUtil.addClass(container, \"leaflet-layer\");\n\n    if (this._zoomAnimated) {\n      L.DomUtil.addClass(this._container, \"leaflet-zoom-animated\");\n    }\n  },\n\n  _destroyContainer() {\n    L.DomUtil.remove(this._container);\n    delete this._container;\n  },\n\n  _isZoomVisible() {\n    const minZoom = this.options.minZoom;\n    const maxZoom = this.options.maxZoom;\n    const zoom = this._map.getZoom();\n\n    const isVisible = zoom >= minZoom && zoom <= maxZoom;\n\n    return isVisible;\n  },\n\n  _zoomShow() {\n    if (this._zoomVisible) return;\n    this._zoomVisible = true;\n\n    this._map.off({ zoomend: this._onZoomVisible }, this);\n\n    if (!this.options.visible) return;\n    this._map.on(this.getEvents(), this);\n\n    this.getContainer().style.display = \"\";\n\n    // Subsequent moveend events take the place of update\n    // this._update();\n  },\n\n  _zoomHide() {\n    if (!this._zoomVisible) return;\n    this._zoomVisible = false;\n\n    this._map.off(this.getEvents(), this);\n    this._map.on({ zoomend: this._onZoomVisible }, this);\n\n    this.getContainer().style.display = \"none\";\n  },\n\n  _updateTransform(center, zoom) {\n    const scale = this._map.getZoomScale(zoom, this._zoom);\n    const position = L.DomUtil.getPosition(this._container);\n    const viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding);\n    const currentCenterPoint = this._map.project(this._center, zoom);\n    const destCenterPoint = this._map.project(center, zoom);\n    const centerOffset = destCenterPoint.subtract(currentCenterPoint);\n    const topLeftOffset = viewHalf\n      .multiplyBy(-scale)\n      .add(position)\n      .add(viewHalf)\n      .subtract(centerOffset);\n\n    if (L.Browser.any3d) {\n      L.DomUtil.setTransform(this._container, topLeftOffset, scale);\n    } else {\n      L.DomUtil.setPosition(this._container, topLeftOffset);\n    }\n  },\n\n  _update() {\n    if (this._map._animatingZoom && this._bounds) {\n      return;\n    }\n\n    this.__update();\n\n    let b = this._bounds;\n    let container = this._container;\n\n    L.DomUtil.setPosition(container, b.min);\n\n    this.fire(\"layer-render\"); // Lifecycle render\n  },\n  __update() {\n    // Update pixel bounds of renderer container (for positioning/sizing/clipping later)\n    // Subclasses are responsible of firing the 'update' event.\n    const p = this.options.padding;\n    const size = this._map.getSize();\n    const min = this._map.containerPointToLayerPoint(size.multiplyBy(-p));\n\n    this._padding = size.multiplyBy(p);\n\n    // this._bounds = new L.Bounds(\n    //   min.round(),\n    //   min.add(size.multiplyBy(1 + p * 2)).round()\n    // );\n    this._bounds = new L.Bounds(min, min.add(size.multiplyBy(1 + p * 2)));\n\n    this._center = this._map.getCenter();\n    this._zoom = this._map.getZoom();\n  },\n\n  _reset() {\n    this._update();\n    this._updateTransform(this._center, this._zoom);\n  },\n\n  /**\n   * API\n   */\n\n  /* Methods */\n\n  getContainer() {\n    return this._container;\n  },\n\n  setContainer(newContainer) {\n    const old = this.getContainer();\n    const parent = old.parentNode;\n\n    delete this._container;\n    this.options.container = newContainer;\n\n    if (!this._container) {\n      this._initContainer();\n    }\n\n    this.setOpacity(this.options.opacity);\n\n    if (window.isNaN(this.options.zIndex)) {\n      switch (this._container.tagName) {\n        case \"CANVAS\": {\n          this.setZIndex(100);\n          break;\n        }\n        case \"svg\": {\n          this.setZIndex(200);\n          break;\n        }\n        default: {\n          this.setZIndex(100);\n        }\n      }\n    } else {\n      this.setZIndex(this.options.zIndex);\n    }\n\n    if (parent) {\n      parent.replaceChild(newContainer, old);\n    } else {\n      this.getPane().appendChild(newContainer);\n    }\n\n    this._update();\n\n    return this;\n  },\n\n  getOpacity() {\n    return this.options.opacity;\n  },\n\n  setOpacity(opacity) {\n    this.getContainer().style.opacity = this.options.opacity = opacity * 1;\n    return this;\n  },\n\n  getZIndex() {\n    return this.options.zIndex;\n  },\n\n  setZIndex(zIndex) {\n    this.getContainer().style.zIndex = this.options.zIndex = zIndex * 1;\n    return this;\n  },\n\n  show() {\n    if (this.options.visible) return;\n    this.options.visible = true;\n\n    if (!this._isZoomVisible()) {\n      this._zoomHide();\n      return;\n    }\n\n    this._map.on(this.getEvents(), this);\n    this.getContainer().style.display = \"\";\n    this._update();\n\n    return this;\n  },\n\n  hide() {\n    if (!this.options.visible) return;\n    this.options.visible = false;\n\n    this._zoomHide();\n\n    this._map.off(this.getEvents(), this);\n    this.getContainer().style.display = \"none\";\n\n    return this;\n  },\n\n  setFullLayerBounds() {\n    const container = this.getContainer();\n    const size = this._bounds.getSize();\n    const padding = this._padding;\n\n    switch (container.tagName) {\n      case \"CANVAS\": {\n        const dpr = L.Browser.retina ? 2 : 1;\n        container.width = dpr * size.x;\n        container.height = dpr * size.y;\n        container.style.width = size.x + \"px\";\n        container.style.height = size.y + \"px\";\n\n        const ctx = container.getContext(\"2d\");\n        if (L.Browser.retina) ctx.scale(dpr, dpr);\n        ctx.translate(padding.x, padding.y);\n\n        return { container, ctx, dpr };\n      }\n      case \"svg\": {\n        container.setAttribute(\"width\", size.x);\n        container.setAttribute(\"height\", size.y);\n        container.style.width = size.x + \"px\";\n        container.style.height = size.y + \"px\";\n        container.setAttribute(\n          \"viewBox\",\n          `${-padding.x} ${-padding.y} ${size.x} ${size.y}`\n        );\n\n        return { container };\n      }\n      case \"DIV\": {\n        container.style.boxSizing = \"content-box\";\n        container.style.width = size.x - padding.x + \"px\";\n        container.style.height = size.y - padding.y + \"px\";\n        container.style.padding = `${padding.y}px ${padding.x}px`;\n\n        return { container };\n      }\n      default: {\n        container.setAttribute(\"width\", size.x);\n        container.setAttribute(\"height\", size.y);\n        container.style.width = size.x + \"px\";\n        container.style.height = size.y + \"px\";\n        return { container };\n      }\n    }\n  }\n\n  /* Events */\n  // on(\"layer-beforemount\", fn);\n  // on(\"layer-mounted\", fn);\n  // on(\"layer-render\", fn);\n  // on(\"layer-beforedestroy\", fn);\n  // on(\"layer-destroyed\", fn);\n});\n\n// @factory L.customLayer(options?: Renderer options)\n// Creates a CustomLayer renderer with the given options.\nfunction customLayer(options) {\n  return L.customLayer ? new CustomLayer(options) : null;\n}\n\n/**\n * Plugin Props\n */\n\nL.CustomLayer = CustomLayer;\nL.customLayer = customLayer;\n\n/**\n * Exports\n */\n\nexport { CustomLayer };\nexport { customLayer };\nexport default customLayer;\n"]},"metadata":{},"sourceType":"module"}