{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8bb03711b739ebccd047","webpack:///./src/leaflet-canvas-layer.ts","webpack:///external \"leaflet\""],"names":[],"mappings":"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","file":"leaflet-canvas-layer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CanvasLayer\"] = factory(require(\"leaflet\"));\n\telse\n\t\troot[\"CanvasLayer\"] = factory(root[\"leaflet\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8bb03711b739ebccd047","/*\n  1.0.1 (downloaded from https://github.com/Sumbera/gLayers.Leaflet/releases/tag/v1.0.1)\n\n  Generic  Canvas Layer for leaflet 0.7 and 1.0-rc,\n  copyright Stanislav Sumbera,  2016 , sumbera.com , license MIT\n  originally created and motivated by L.CanvasOverlay  available here: https://gist.github.com/Sumbera/11114288\n*/\n\nimport { Bounds, Browser, DomUtil, LatLng, LatLngBounds, Layer, LayerOptions, LeafletEventHandlerFn, Map as LMap, ResizeEvent, Util, ZoomAnimEvent } from 'leaflet'\n\n// tslint:disable:interface-name\nexport interface Map extends LMap {\n    _latLngBoundsToNewLayerBounds(ll: LatLngBounds, z: number, c: LatLng): Bounds\n}\n\nexport class CanvasLayer extends Layer {\n    protected _canvas: HTMLCanvasElement\n    protected _map: Map\n\n    private _delegate: any\n    private _frame: any\n\n    // -- initialized is called on prototype\n    constructor(options?: LayerOptions) {\n        super(options)\n        this._map = null\n        this._canvas = null\n        this._frame = null\n        this._delegate = null\n    }\n\n    // -------------------------------------------------------------\n    public getEvents() {\n        const events: { [index: string]: LeafletEventHandlerFn } = {\n            // resize: this._onLayerDidResize,\n            moveend: this._onLayerDidMove,\n        }\n        if (this._map.options.zoomAnimation && Browser.any3d) {\n            events.zoomanim = this._animateZoom\n        }\n\n        return events\n    }\n    // -------------------------------------------------------------\n    public onAdd(map: Map) {\n        this._map = map\n        this._canvas = DomUtil.create('canvas', 'leaflet-layer') as HTMLCanvasElement\n\n        const size = this._map.getSize()\n        this._canvas.width = size.x\n        this._canvas.height = size.y\n\n        const animated = this._map.options.zoomAnimation && Browser.any3d\n        DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'))\n\n        map.getPanes().overlayPane.appendChild(this._canvas)\n\n        const del = this._delegate || this\n        if (del.onLayerDidMount) { del.onLayerDidMount() } // -- callback\n\n        this.needRedraw()\n        return this\n    }\n\n    // -------------------------------------------------------------\n    public onRemove(map: Map) {\n        const del = this._delegate || this\n        if (del.onLayerWillUnmount) { del.onLayerWillUnmount() } // -- callback\n\n        map.getPanes().overlayPane.removeChild(this._canvas)\n\n        this._canvas = null\n        return this\n    }\n\n    // -------------------------------------------------------------\n    public needRedraw() {\n        if (!this._frame) {\n            this._frame = Util.requestAnimFrame(this.drawLayer, this)\n        }\n        return this\n    }\n\n    // -------------------------------------------------------------\n    public delegate(del: any) {\n        this._delegate = del\n        return this\n    }\n\n    // -------------------------------------------------------------\n    private _onLayerDidResize(resizeEvent: ResizeEvent) {\n        this._canvas.width = resizeEvent.newSize.x\n        this._canvas.height = resizeEvent.newSize.y\n    }\n\n    // -------------------------------------------------------------\n    private _onLayerDidMove() {\n        const topLeft = this._map.containerPointToLayerPoint([0, 0])\n        DomUtil.setPosition(this._canvas, topLeft)\n        this.drawLayer()\n    }\n\n    // --------------------------------------------------------------------------------\n    private LatLonToMercator(latlon: LatLng) {\n        return {\n            x: latlon.lng * 6378137 * Math.PI / 180,\n            y: Math.log(Math.tan((90 + latlon.lat) * Math.PI / 360)) * 6378137\n        }\n    }\n\n    // ------------------------------------------------------------------------------\n    private drawLayer() {\n        // -- todo make the viewInfo properties  flat objects.\n        const _size = this._map.getSize()\n        this._canvas.width = _size.x\n        this._canvas.height = _size.y\n        const _bounds = this._map.getBounds()\n        const _zoom = this._map.getZoom()\n\n        const _center = this.LatLonToMercator(this._map.getCenter())\n        const _corner = this.LatLonToMercator(this._map.containerPointToLatLng(this._map.getSize()))\n\n        const del = this._delegate || this\n        if (del.onDrawLayer) {\n            del.onDrawLayer({\n                bounds: _bounds,\n                canvas: this._canvas,\n                center: _center,\n                corner: _corner,\n                layer: this,\n                size: _size,\n                zoom: _zoom\n            })\n        }\n        this._frame = null\n    }\n\n    // ------------------------------------------------------------------------------\n    private _animateZoom(e: ZoomAnimEvent) {\n        const scale = e.target.getZoomScale(e.zoom, e.target.getZoom())\n        const offset = this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(), e.zoom, e.center).min\n        DomUtil.setTransform(this._canvas, offset, scale)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/leaflet-canvas-layer.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"leaflet\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}